<!-- magasin/templates/magasin/ajouter_commande.html -->

{% extends 'magasin/base.html' %}

{% block content %}
 <!--<h1>Ajouter une commande</h1>
  <form method="post" action="{% url 'ajouter_commande' %}">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">Enregistrer la commande</button>
  </form>
-->

<h1>Ajouter une commande</h1>

<!-- Formulaire d'ajout de commande avec styles CSS -->
<form method="post" action="{% url 'ajouter_commande' %}" style="text-align: center; margin-top: 20px;">
    {% csrf_token %}
    <style>
        /* Style pour le formulaire */
        form {
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            background-color: #f5f5f5;
            width: 60%;
            margin: auto;
        }

        /* Style pour les boutons */
        button[type="submit"] {
            padding: 10px 20px;
            background-color: #007bff;
            color: #fff;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 10px;
        }

        button[type="submit"]:hover {
            background-color: #0056b3;
        }

        /* Style pour les champs de texte */
        input[type="text"],
        select {
            width: 100%;
            padding: 10px;
            margin-top: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box;
        }
    </style>

    <!-- Champs du formulaire -->
    {{ form.as_p }}

    <!-- Bouton pour enregistrer la commande -->
    <button type="submit">Enregistrer la commande</button>
</form>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
<script>
    $(document).ready(function() {
        $('#commande-form').on('change', 'input[name="produits"]', function() {
            var produits = [];
            $('input[name="produits"]:checked').each(function() {
                produits.push($(this).val());
            });
            var total = 0;
            produits.forEach(function(produitId) {
                total += parseFloat($('#id_produit_' + produitId).data('prix'));
            });
            $('#id_totalCde').val(total.toFixed(2));
        });
    });
</script>
{% endblock %}


